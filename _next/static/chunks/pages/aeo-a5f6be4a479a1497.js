(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7829],{12476:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(37876);s(14232);let a=e=>{let{fields:t,renderRow:s}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"grid grid-cols-".concat(t.length," place-items-center gap-1 sm:gap-2 md:gap-3 lg:gap-4 bg-gray-100 text-gray-700 font-medium py-3 px-5 sticky top-0 z-20"),children:t.map((e,t)=>(0,r.jsx)("div",{className:"text-sm lg:text-base w-full h-full text-center",children:e},t))}),(0,r.jsx)("div",{children:s()})]})}},16821:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(42874),a=s(80498),n=s(3176),i=s(65259),l=s(20318);let o=()=>n.A.apiUrl+"/connect/update";class d{static getInstance(e){return(0,r._)(d,d,u)||(0,a._)(d,d,u,new d(e)),(0,r._)(d,d,u)}setOrgId(e){this.orgId=e}on(e,t){this.listener.add(t),"not_connected"===this.status&&this.connect()}off(e){this.listener.remove(e)}setupPing(){setTimeout(()=>{this.socket&&this.socket.readyState===WebSocket.OPEN&&(this.socket.send("{}"),this.setupPing())},3e4)}connect(){if("not_connected"!==this.status)return;this.changeStatus("connecting");let e=[],t=i.A.token();t&&e.push("access_token="+t),this.orgId&&e.push("org_id="+this.orgId);let s=e.length?"?"+e.join("&"):"";this.socket=new WebSocket(o()+s),this.socket.addEventListener("open",()=>{this.changeStatus("connected"),this.setupPing()}),this.socket.addEventListener("close",()=>{this.changeStatus("not_connected"),console.log("WebSocket closed")}),this.socket.addEventListener("message",e=>{try{let t=JSON.parse(e.data);this.listener.trigger(t)}catch(t){console.error("Invalid WebSocket message:",e.data)}})}send(e){this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify(e))}disconnect(){if(this.socket)try{this.socket.close()}catch(e){console.error("Error closing WebSocket:",e)}}changeStatus(e){this.status!==e&&(this.status=e)}constructor(e){this.status="not_connected",this.socket=null,this.orgId=e,this.listener=new l.A}}var u={writable:!0,value:null};let c=d},23839:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(37876),a=s(14232),n=s(26478);let i=e=>{let{children:t}=e,[s,i]=(0,a.useState)(!1),l=(0,a.useRef)(null),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!s)return;let e=l.current,t=o.current;e&&t&&requestAnimationFrame(()=>{let s=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a={top:s.top,bottom:window.innerHeight-s.bottom,left:s.left,right:window.innerWidth-s.right};Object.assign(t.style,{top:"",bottom:"",left:"",right:""}),a.right>=r.width?(t.style.left="120%",t.style.top="0"):a.left>=r.width&&(t.style.right="120%",t.style.top="0"),a.bottom<=r.height&&(t.style.top="-".concat(r.height-s.height,"px"))})},[s]),(0,a.useEffect)(()=>{let e=e=>{var t,s;(null===(t=l.current)||void 0===t?void 0:t.contains(e.target))||(null===(s=o.current)||void 0===s?void 0:s.contains(e.target))||i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.jsx)("div",{className:"relative w-full h-full",children:(0,r.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 inline-block z-10",children:[(0,r.jsx)("button",{ref:l,onClick:e=>{e.stopPropagation(),i(e=>!e)},className:"p-2 rounded bg-gray-100 cursor-pointer",children:(0,r.jsx)(n.Ym0,{})}),s&&(0,r.jsx)("div",{ref:o,className:"absolute min-w-[150px] p-1 bg-white shadow-[0_0_5px_rgba(0,0,0,0.2)] rounded-lg z-50 transition-all",children:t})]})})}},24480:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(37876);let a=e=>{let{children:t,columns:s,...a}=e;return(0,r.jsx)("div",{className:"grid grid-cols-".concat(s," gap-2 sm:gap-3 md:gap-3 lg-gap-5 place-items-center py-4 px-5 border-b border-l border-r border-gray-100 hover:bg-gray-50"),...a,children:t})}},32675:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(37876);s(14232);let a=e=>{let{label:t,action:s}=e;return(0,r.jsx)("button",{className:"py-1 px-2 hover:bg-gray-100 rounded cursor-pointer block w-full text-left",onClick:s,children:t})}},32722:(e,t,s)=>{"use strict";function r(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}s.d(t,{_:()=>r})},35712:(e,t,s)=>{"use strict";function r(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}s.d(t,{_:()=>r})},42874:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var r=s(32722),a=s(35712);function n(e,t,s){return(0,r._)(e,t),(0,a._)(s,"get"),s.get?s.get.call(e):s.value}},53949:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo",function(){return s(83131)}])},70430:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(37876),a=s(14232),n=s(74562),i=s(65259),l=s(43598),o=s(49034);let d=e=>{let{id:t,args:s,setRefetchQuery:o}=e,[d,x]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null),[f,p]=(0,a.useState)([]),b=e=>{let t=f.find(t=>t.id===e.target.id);t&&(t.value=e.target.value),p(f.map(s=>s.id===e.target.id&&null!=t?t:s))},v=async e=>{e.preventDefault();let s=Object.fromEntries(new FormData(e.target));for(let e in s){let t=s[e].toString().trim();if(!t)return;s[e]=t}x(!0);let r=await i.A.doPost({path:"/orgs/".concat(l.A.current().id,"/querysets/").concat(t),data:{data:{args:s}}});if(r.error){h(r.error.message);return}r.data&&(n.A.hide(),o(e=>!e)),x(!1)},j=(0,a.useCallback)(async()=>{let{data:e,error:t}=await i.A.doGet({path:"/orgs/".concat(l.A.current().id,"/aeo/workflows")});if(t){h("Error fetching workflows"),console.log(t.message);return}e&&p(e.workflows.filter(e=>"qgen"===e.type)[0].args.filter(e=>e.used_for.includes("analysis")).map(e=>({...e,value:s[e.id]})))},[s]);return(0,a.useEffect)(()=>{j()},[j]),(0,r.jsxs)("form",{className:"max-h-[60vh] overflow-auto flex flex-col",onSubmit:v,children:[(0,r.jsx)("div",{children:f.length>0&&f.map(e=>"textarea"===e.editor?(0,r.jsx)(c,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):"country_dropdown"===e.editor?(0,r.jsx)(m,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):(0,r.jsx)(u,{id:e.id,name:e.name,value:e.value,changeHandler:b,description:e.description,required:e.required},e.id))}),g&&(0,r.jsx)("div",{className:"text-red-500 font-medium text-base mt-4 mx-1",children:g}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"bg-indigo-500 text-white font-semibold mt-4 mx-1 py-2 px-4 cursor-pointer rounded-lg hover:bg-indigo-600 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Update"})]})},u=e=>{let{id:t,name:s,description:n,required:i,value:l}=e,[o,d]=(0,a.useState)(l);return(0,r.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,r.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:s}),(0,r.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:n}),(0,r.jsx)("input",{type:"text",id:t,name:t,value:o,onChange:e=>d(e.target.value),required:i,className:"border border-neutral-300 text-neutral-400 font-medium bg-slate-50 max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},c=e=>{let{id:t,name:s,description:n,required:i,value:l}=e,[o,d]=(0,a.useState)(l);return(0,r.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,r.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:s}),(0,r.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:n}),(0,r.jsx)("textarea",{id:t,name:t,required:i,value:o,onChange:e=>d(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-slate-50 max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},m=e=>{let{id:t,name:s,description:n,required:i,value:l}=e,d=(0,o.oj)(),[u,c]=(0,a.useState)(l);return(0,r.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,r.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:s}),(0,r.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:n}),(0,r.jsx)("select",{id:t,name:t,required:i,value:u,onChange:e=>c(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-slate-50 max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",children:Object.values(d).map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]})}},80498:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var r=s(32722),a=s(35712);function n(e,t,s,n){return(0,r._)(e,t),(0,a._)(s,"set"),!function(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=s}}(e,s,n),n}},83131:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(37876),a=s(65259),n=s(82400),i=s(43598),l=s(89099),o=s(14232),d=s(23839),u=s(12476),c=s(24480),m=s(74562),x=s(49034),g=s(16821);let h=e=>{var t;let{setRefetchTask:s}=e,[n,d]=(0,o.useState)(!1),[u,c]=(0,o.useState)(null),[x,h]=(0,o.useState)([]),[v,j]=(0,o.useState)(""),[y,w]=(0,o.useState)(null),[N,A]=(0,o.useState)(""),[S,k]=(0,o.useState)(""),_=(0,l.useRouter)(),q=i.A.current().id,E=e=>{switch(e){case"website":return v;case"keywords":return(null==y?void 0:y.search_queries.join("\n"))||"";case"user_persona":return(null==y?void 0:y.user_personas.join("\n"))||"";case"brand":return(null==y?void 0:y.brand_names.join(", "))||"";case"location":return(null==y?void 0:y.country_code)||"";case"domains":return(null==y?void 0:y.domains.join(", "))||"";case"num_queries":return(null==y?void 0:y.num_queries.toString())||"";default:return""}},C=async()=>{if(!v){c("Please enter a website");return}c(null),d(!0);let{data:e,error:t}=await a.A.doGet({path:"/orgs/".concat(i.A.current().id,"/aeo/querygen-suggestions?website=").concat(v)});if(t){c("Something went wrong. Please try again."),d(!1);return}e&&k(e.task_id)},P=(0,o.useCallback)(async e=>{let{data:t,error:s}=await a.A.doGet({path:"/orgs/".concat(i.A.current().id,"/aeo/tasks/").concat(e)});if(s){c("Something went wrong"),d(!1);return}if(t){let e=t.task.data.suggestions;A(e.name),w(e),d(!1)}},[]),R=async()=>{let{data:e,error:t}=await a.A.doGet({path:"/orgs/".concat(i.A.current().id,"/aeo/workflows")});if(t){c("Error fetching workflows"),console.log(t.message);return}e&&h(e.workflows.filter(e=>"qgen"===e.type))},O=async e=>{var t;e.preventDefault(),c(null);let s=Object.fromEntries(new FormData(e.target));for(let e in s){let t=s[e].toString().trim();s[e]=t}let r=s.name;if(delete s.name,5>Number(s.num_queries)){c("Number of queries cannot be less than 5");return}if(Number(s.num_queries)>10){c("Number of queries cannot be more than 10 in free tier");return}let n={name:r,data:{workflow:null===(t=x[0])||void 0===t?void 0:t.id,args:s}};d(!0);let l=await a.A.doPost({path:"/orgs/".concat(i.A.current().id,"/querysets"),data:n});if(l.error){c(l.error.message);return}if(l.data){let{id:e}=l.data;if(e){let{data:t,error:s}=await a.A.doPost({path:"/orgs/".concat(i.A.current().id,"/querysets/").concat(e),data:{action:"start_task"}});s&&c(s.message),t&&_.push("/aeo/manage?id=".concat(e))}m.A.hide()}d(!1)};return(0,o.useEffect)(()=>{R()},[]),(0,o.useEffect)(()=>{let e=g.A.getInstance(q),t=e=>{"querygen_helper_task_status"===e.type&&e.data.task_id===S&&("completed"===e.data.status?P(S):"failed"===e.data.status&&c("Task failed"))};return e.on("message",t),()=>{e.off("message",t)}},[q,P,S]),(0,r.jsxs)("form",{className:"max-h-[60vh] overflow-auto flex flex-col",onSubmit:O,children:[(0,r.jsxs)("div",{className:"mt-4 flex flex-col mb-1 ".concat(y?"hidden":""),children:[(0,r.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:"name",children:"Enter your business website"}),(0,r.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:"Enter the URL of your website"}),(0,r.jsx)("input",{type:"text",id:"website",value:v,onChange:e=>j(e.target.value),required:!0,className:"border border-neutral-300 text-neutral-400 font-medium bg-slate-50 max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]}),(0,r.jsxs)("div",{className:"mt-4 flex flex-col mb-1 ".concat(y?"":"hidden"),children:[(0,r.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:"name",children:"Question set name"}),(0,r.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:"create any name to identify questions set"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:N,onChange:e=>A(e.target.value),required:!0,className:"border border-neutral-300 text-neutral-400 font-medium bg-slate-50 max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]}),(0,r.jsx)("div",{className:"".concat(y?"":"hidden"),children:y&&x.length>0&&(null===(t=x[0])||void 0===t?void 0:t.args.map(e=>"textarea"===e.editor?(0,r.jsx)(p,{id:e.id,name:e.name,description:e.description,required:e.required,initialValue:E(e.id)},e.id):"country_dropdown"===e.editor?(0,r.jsx)(b,{id:e.id,name:e.name,description:e.description,required:e.required,initialValue:E(e.id)},e.id):(0,r.jsx)(f,{id:e.id,name:e.name,description:e.description,required:e.required,initialValue:E(e.id)},e.id)))}),u&&(0,r.jsx)("div",{className:"text-red-500 font-medium text-base mt-4 mx-1",children:u}),y&&(0,r.jsx)("button",{type:"submit",disabled:n,className:"bg-indigo-500 text-white font-semibold mt-4 mx-1 py-2 px-4 cursor-pointer rounded-lg hover:bg-indigo-600 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Generate Questions"}),!y&&(0,r.jsx)("button",{type:"button",disabled:n,onClick:()=>C(),className:"bg-indigo-500 text-white font-semibold mt-4 mx-1 py-2 px-4 cursor-pointer rounded-lg hover:bg-indigo-600 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?"Please wait while we are fetching details..":"Next"})]})},f=e=>{let{id:t,name:s,description:a,required:n,initialValue:i}=e,[l,d]=(0,o.useState)(i);return(0,r.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,r.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:s}),(0,r.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:a}),(0,r.jsx)("input",{type:"text",id:t,name:t,value:l,onChange:e=>d(e.target.value),required:n,readOnly:"website"===t,className:"border border-neutral-300 text-neutral-400 font-medium bg-slate-50 max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},p=e=>{let{id:t,name:s,description:a,required:n,initialValue:i}=e,[l,d]=(0,o.useState)(i);return(0,r.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,r.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:s}),(0,r.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:a}),(0,r.jsx)("textarea",{id:t,name:t,value:l,rows:l.split("\n").length,onChange:e=>d(e.target.value),required:n,className:"border border-neutral-300 text-neutral-400 font-medium bg-slate-50 max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},b=e=>{let{id:t,name:s,description:a,required:n,initialValue:i}=e,l=(0,x.oj)(),[d,u]=(0,o.useState)(i);return(0,r.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,r.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:s}),(0,r.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:a}),(0,r.jsx)("select",{id:t,name:t,required:n,value:d,onChange:e=>u(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-slate-50 max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",children:Object.values(l).map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]})};var v=s(32675),j=s(70430);let y=()=>{let[e,t]=(0,o.useState)([]),[s,x]=(0,o.useState)(!1),[g,f]=(0,o.useState)(null),[p,b]=(0,o.useState)(!1),y=(0,l.useRouter)(),S=(0,o.useCallback)(async s=>{var r;let{loader:n}=s;0===e.length&&n&&x(!0);let{data:l,error:o}=await a.A.doGet({path:"/orgs/".concat(null===(r=i.A.current())||void 0===r?void 0:r.id,"/querysets")});if(o){f("Something went wrong"),x(!1);return}if(l){if(0===l.querysets.length){f("No question lists found"),x(!1),t([]);return}f(null),t(l.querysets),x(!1)}},[e.length]);return(0,o.useEffect)(()=>{n.A.getOrgSetupRedirectPath()&&setTimeout(()=>{m.A.show("Setup Business Profile",(0,r.jsx)(A,{}),!0)},0)},[y]),(0,o.useEffect)(()=>{S({loader:!0})},[S,p]),(0,r.jsxs)("div",{className:"bg-white p-2 lg:p-6 min-h-[calc(100vh-80px)]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-5 sticky top-0",children:[(0,r.jsx)("h2",{className:"text-lg lg:text-2xl font-semibold text-[#1E2035] ",children:"ChatGPT Visibility Analysis"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded cursor-pointer text-sm",onClick:()=>{m.A.show("Start Analysis",(0,r.jsx)(h,{setRefetchTask:b}))},children:"Analyse my brand"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded cursor-pointer text-sm",onClick:()=>y.push("/aeo/analysis"),children:"Reports"})]})]}),s&&(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-gray-900"})}),!s&&g&&(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-red-500",children:g})}),!s&&e.length>0&&(0,r.jsx)("div",{className:"flex items-center justify-start mb-4",children:(0,r.jsx)("span",{className:"text-gray-700",children:"Question Sets"})}),!s&&e.length>0&&(0,r.jsx)(u.A,{fields:["Updated At","Name","Actions"],renderRow:()=>e.map(e=>(0,r.jsxs)(c.A,{columns:3,onClick:()=>{y.push("/aeo/manage/?id=".concat(e.id))},children:[(0,r.jsx)("div",{className:"text-blue-500 w-full h-full text-center",title:e.created_at.toString(),children:(0,r.jsx)("span",{className:"inline-block text-blue-500",children:new Date(Number(e.updated_at)).toLocaleString()})}),(0,r.jsx)("div",{className:"capitalize text-sm lg:text-base w-full h-full text-center",children:e.name}),(0,r.jsxs)(d.A,{children:[(0,r.jsx)(v.A,{label:"Questions",action:t=>{t.stopPropagation(),y.push("/aeo/manage/?id=".concat(e.id))}}),(0,r.jsx)(v.A,{label:"Reports",action:t=>{t.stopPropagation(),y.push("/aeo/analysis/?id=".concat(e.id))}}),(0,r.jsx)(v.A,{label:"Rename",action:t=>{t.stopPropagation(),m.A.show("Rename Query Set",(0,r.jsx)(N,{id:e.id,name:e.name,setRefetchTask:b}))}}),(0,r.jsx)(v.A,{label:"Delete",action:t=>{t.stopPropagation(),m.A.show("Delete Query Set",(0,r.jsx)(w,{id:e.id,setRefetchTask:b}))}}),(0,r.jsx)(v.A,{label:"Edit Business Profile",action:t=>{t.stopPropagation(),m.A.show("Edit Business Profile",(0,r.jsx)(j.A,{id:e.id,args:e.data.args,setRefetchQuery:b}))}})]})]},e.id))})]})},w=e=>{let{id:t,setRefetchTask:s}=e,[n,l]=(0,o.useState)(!1),[d,u]=(0,o.useState)(null),c=async()=>{u(null),l(!0);let e=await a.A.doDelete({path:"/orgs/".concat(i.A.current().id,"/querysets/").concat(t)});if(e.error){u(e.error.message),l(!1);return}l(!1),m.A.hide(),s(e=>!e)};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center justify-start",children:(0,r.jsx)("span",{children:"Are you sure you want to delete this query set?"})}),d&&(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)("span",{className:"text-red-500",children:d})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,r.jsx)("button",{type:"button",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-gray-500 text-white rounded cursor-pointer",onClick:()=>m.A.hide(),children:"Cancel"}),(0,r.jsx)("button",{type:"button",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-red-600 text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:c,disabled:n,children:"Delete"})]})]})},N=e=>{let{id:t,name:s,setRefetchTask:n}=e,[l,d]=(0,o.useState)(!1),[u,c]=(0,o.useState)(null),[x,g]=(0,o.useState)(s),h=async e=>{if(e.preventDefault(),!x)return;d(!0),c(null);let s=await a.A.doPost({path:"/orgs/".concat(i.A.current().id,"/querysets/").concat(t),data:{name:x}});if(s.error){c(s.error.message),d(!1);return}d(!1),m.A.hide(),n(e=>!e)};return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{onSubmit:h,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"flex items-center justify-start",htmlFor:"name",title:"Enter new name",children:(0,r.jsx)("span",{children:"Enter new name"})}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",required:!0,className:"w-full border border-gray-300 rounded px-2 py-1",value:x,onChange:e=>g(e.target.value)})]}),u&&(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)("span",{className:"text-red-500",children:u})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,r.jsx)("button",{type:"button",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-gray-500 text-white rounded cursor-pointer",onClick:()=>m.A.hide(),children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-indigo-600 text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:l,children:"Update"})]})]})})},A=()=>{let[e,t]=(0,o.useState)(""),[s,l]=(0,o.useState)(!1),[d,u]=(0,o.useState)(null),c=async s=>{var r;if(s.preventDefault(),!(null==e?void 0:e.trim())){u("Please enter a valid organization name"),t("");return}l(!0);let o=i.A.current()?"/orgs/".concat(null===(r=i.A.current())||void 0===r?void 0:r.id):"/orgs/setup";try{let t=await a.A.doPost({path:o,data:{name:e}});if(t.error){u(t.error.message);return}await n.A.fetchCurrentUser();let s=i.A.current();s.name=e,i.A.setCurrent(s),m.A.hide(),window.location.reload()}catch(e){console.error("Error creating organization:",e),u("Unable to create organization")}finally{l(!1)}};return(0,r.jsxs)("form",{onSubmit:c,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"flex items-center justify-start",htmlFor:"orgName",children:(0,r.jsx)("span",{children:"Enter orgnaization name"})}),(0,r.jsx)("input",{type:"text",id:"orgName",required:!0,className:"w-full border border-gray-300 rounded px-2 py-1",value:e,onChange:e=>t(e.target.value)})]}),d&&(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)("span",{className:"text-red-500",children:d})}),(0,r.jsx)("div",{className:"flex justify-end gap-2 mt-4",children:(0,r.jsx)("button",{type:"submit",className:"lg:px-4 lg:py-2 text-sm px-2 py-1 bg-indigo-600 text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:s,children:"Update"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2517,9034,636,6593,8792],()=>t(53949)),_N_E=e.O()}]);