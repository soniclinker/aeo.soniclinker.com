(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2305],{36860:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>D,vU:()=>v});var a=n(37876),r=n(15451),s=n(14232),i=n(38412),l=n(7972),o=n(7e3),c=n(71547),u=n(53970),d=n(23618),m=n(12171),f=n(37096),h=n(35324),p=n(98275),x=n(70505);let y=()=>{let e=new Date,t=new Date(e);t.setDate(e.getDate()-7),t.setHours(0,0,0,0);let n=new Date(e);return n.setHours(23,59,59,999),{startDate:t.getTime(),endDate:n.getTime(),key:"selection"}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"date_range",t=sessionStorage.getItem(e);if(!t)return null;let n=JSON.parse(t);return n.type&&"custom"!==n.type?{...j(n.type),key:"selection"}:"custom"===n.type&&n.startDate&&n.endDate?{startDate:n.startDate,endDate:n.endDate,key:"selection"}:null},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date_range";if(e.startDate&&e.endDate){let n=g(e.startDate,e.endDate);if("custom"!==n)return sessionStorage.setItem(t,JSON.stringify({type:n,key:"selection"})),{...j(n),key:"selection"};{let n=new Date(e.startDate);n.setHours(0,0,0,0);let a=new Date(e.endDate);a.setHours(23,59,59,999);let r={type:"custom",startDate:n.getTime(),endDate:a.getTime(),key:"selection"};return sessionStorage.setItem(t,JSON.stringify(r)),r}}return null},g=(e,t)=>{let n=new Date;if((0,o.o)(e).getTime()===(0,o.o)(n).getTime()&&(0,c.D)(t).getTime()===(0,c.D)(n).getTime())return"today";let a=(0,u.e)(n,1);if((0,o.o)(e).getTime()===(0,o.o)(a).getTime()&&(0,c.D)(t).getTime()===(0,c.D)(a).getTime())return"yesterday";if((0,d.k)(e).getTime()===(0,d.k)(n).getTime()&&(0,c.D)(t).getTime()===(0,m.$)(n).getTime())return"this_week";let r=(0,d.k)((0,f.k)(n,1)),s=(0,m.$)((0,f.k)(n,1));if((0,o.o)(e).getTime()===(0,o.o)(r).getTime()&&(0,c.D)(t).getTime()===(0,c.D)(s).getTime())return"last_week";if((0,h.w)(e).getTime()===(0,h.w)(n).getTime()&&(0,c.D)(t).getTime()===(0,p.p)(n).getTime())return"this_month";let i=(0,h.w)((0,x.a)(n,1)),l=(0,p.p)((0,x.a)(n,1));return(0,o.o)(e).getTime()===(0,o.o)(i).getTime()&&(0,c.D)(t).getTime()===(0,c.D)(l).getTime()?"last_month":"custom"};function j(e){let t,n;let a=new Date;switch(e){case"today":(t=new Date(a)).setHours(0,0,0,0),(n=new Date(a)).setHours(23,59,59,999);break;case"last_week":(t=new Date(a)).setDate(a.getDate()-7),t.setHours(0,0,0,0),(n=new Date(a)).setHours(23,59,59,999);break;case"last_month":t=new Date(a.getFullYear(),a.getMonth()-1,1),n=new Date(a.getFullYear(),a.getMonth(),0,23,59,59,999);break;case"this_week":(t=new Date(a)).setDate(a.getDate()-a.getDay()),t.setHours(0,0,0,0),(n=new Date(a)).setHours(23,59,59,999);break;case"this_month":t=new Date(a.getFullYear(),a.getMonth(),1),(n=new Date(a)).setHours(23,59,59,999);break;case"yesterday":(t=new Date(a)).setDate(a.getDate()-1),t.setHours(0,0,0,0),(n=new Date(a)).setDate(a.getDate()-1),n.setHours(23,59,59,999);break;default:t=new Date(a),n=new Date(a)}return{startDate:t.getTime(),endDate:n.getTime()}}let w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd MMM, yyyy";return"".concat((0,r.GP)(e.startDate,t)," â€“ ").concat((0,r.GP)(e.endDate,t))},D=e=>{let{value:t,onChange:n,handleDateRangeSelection:r,storageKey:o="date_range",dateFormat:c="dd MMM, yyyy",minDate:u,maxDate:d=new Date}=e,m=void 0!==t&&"function"==typeof n,[f,h]=(0,s.useState)(v(o)||y()),[p,x]=(0,s.useState)(!1),g=(0,s.useRef)(null),j=m?t:f,D=m?n:h,N=(0,s.useMemo)(()=>w(j,c),[j,c]),k=(0,s.useMemo)(()=>[{...j,startDate:new Date(j.startDate),endDate:new Date(j.endDate)}],[j]);return(0,s.useEffect)(()=>{r&&r(j)},[j]),(0,s.useEffect)(()=>{if(p)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)};function e(e){g.current&&!g.current.contains(e.target)&&x(!1)}},[p]),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"relative",ref:g,children:[(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("button",{className:"flex items-center border border-gray-300 rounded-lg px-3 py-2 text-xs bg-white",onClick:()=>x(e=>!e),"aria-haspopup":"dialog","aria-expanded":p,"aria-label":"Select date range",type:"button",children:[(0,a.jsx)("span",{className:"mr-2",children:N}),(0,a.jsx)(l.fK4,{className:"text-base"})]})}),p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1),style:{background:"transparent"}}),(0,a.jsx)("div",{className:"absolute right-0 z-20 bg-white shadow-lg mt-2",role:"dialog","aria-modal":"true",children:(0,a.jsx)(i.Ur,{editableDateInputs:!0,onChange:e=>{let t=b(e.selection,o);t&&D(t)},moveRangeOnFirstSelection:!1,ranges:k,direction:"horizontal",minDate:u,maxDate:d})})]})]})})}},42059:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(37876),r=n(14232),s=n(89099),i=n(43598);let l=()=>{let e=(0,s.useRouter)(),t=e.asPath,[n,l]=(0,r.useState)("aeo"),o=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))).map(e=>"aeo"===e?n:e),c=o.map((r,s)=>{let i=s===o.length-1;return(0,a.jsxs)("div",{className:"inline",children:[(0,a.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(i)return;let a=o.slice(0,s+1),r="/".concat(a.map(e=>e===n?1===a.length?"/aeo/overview":"aeo":e).join("/"));r!==t&&r!=="/".concat(o[0])&&e.push(r)},children:r.replace(/-/g," ")}),!i&&(0,a.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},s)});return(0,r.useEffect)(()=>{(async()=>{let e=await i.A.currentAeoProject();e&&l(e.name)})()},[]),(0,a.jsx)("div",{children:c})},o=e=>{let{children:t,title:n}=e;return(0,a.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap sticky top-0 z-20",children:[n||(0,a.jsx)(l,{}),t&&(0,a.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},42754:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ed});var a=n(37876),r=n(74562),s=n(65259),i=n(43598),l=n(14232);n(16691),n(58198);var o=n(94344),c=n(36860),u=n(42059),d=n(6630);let m=e=>{let{header:t,subheader:n,children:r,className:s=""}=e;return(0,a.jsxs)("div",{className:"w-full bg-white rounded-lg shadow-none border-0 p-0 ".concat(s),children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-base font-semibold text-[#222] mb-1",children:t}),n&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:n})]})}),r]})};var f=n(68869),h=n(49325),p=n(94499),x=n(65748),y=n(7623),v=n(19926),b=n(69241),g=n(77340),j=n(19850),w=n.n(j),D=n(20624),N=n.n(D),k=n(19809),A=n.n(k),S=n(20527),O=n.n(S),E=n(41946),P=n.n(E),_=n(69067),T=n(9533),M=n(55037),L=n(87110),I=n(13646),R=n(92410),C=n(33311),B=n(84841),F=["layout","type","stroke","connectNulls","isRange","ref"],z=["key"];function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){Y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function G(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,X(a.key),a)}}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(K=function(){return!!e})()}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t,n){return(t=X(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=H(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}var $=function(e){var t,n;function a(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a);for(var e,t,n,r=arguments.length,s=Array(r),i=0;i<r;i++)s[i]=arguments[i];return t=a,n=[].concat(s),t=Q(t),Y(e=function(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,K()?Reflect.construct(t,n||[],Q(this).constructor):t.apply(this,n)),"state",{isAnimationFinished:!0}),Y(e,"id",(0,R.NF)("recharts-area-")),Y(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),w()(t)&&t()}),Y(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),w()(t)&&t()}),e}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(a,e),t=[{key:"renderDots",value:function(e,t,n){var r=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(r&&!s)return null;var i=this.props,o=i.dot,c=i.points,u=i.dataKey,d=(0,B.J9)(this.props,!1),m=(0,B.J9)(o,!0),f=c.map(function(e,t){var n=J(J(J({key:"dot-".concat(t),r:3},d),m),{},{index:t,cx:e.x,cy:e.y,dataKey:u,value:e.value,payload:e.payload,points:c});return a.renderDotItem(o,n)}),h={clipPath:e?"url(#clipPath-".concat(t?"":"dots-").concat(n,")"):null};return l.createElement(M.W,V({className:"recharts-area-dots"},h),f)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,n=t.baseLine,a=t.points,r=t.strokeWidth,s=a[0].x,i=a[a.length-1].x,o=e*Math.abs(s-i),c=N()(a.map(function(e){return e.y||0}));return((0,R.Et)(n)&&"number"==typeof n?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(N()(n.map(function(e){return e.y||0})),c)),(0,R.Et)(c))?l.createElement("rect",{x:s<i?s:s-o,y:0,width:o,height:Math.floor(c+(r?parseInt("".concat(r),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,n=t.baseLine,a=t.points,r=t.strokeWidth,s=a[0].y,i=a[a.length-1].y,o=e*Math.abs(s-i),c=N()(a.map(function(e){return e.x||0}));return((0,R.Et)(n)&&"number"==typeof n?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(N()(n.map(function(e){return e.x||0})),c)),(0,R.Et)(c))?l.createElement("rect",{x:0,y:s<i?s:s-o,width:c+(r?parseInt("".concat(r),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,n,a){var r=this.props,s=r.layout,i=r.type,o=r.stroke,c=r.connectNulls,u=r.isRange,d=(r.ref,W(r,F));return l.createElement(M.W,{clipPath:n?"url(#clipPath-".concat(a,")"):null},l.createElement(_.I,V({},(0,B.J9)(d,!0),{points:e,connectNulls:c,type:i,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==o&&l.createElement(_.I,V({},(0,B.J9)(this.props,!1),{className:"recharts-area-curve",layout:s,type:i,connectNulls:c,fill:"none",points:e})),"none"!==o&&u&&l.createElement(_.I,V({},(0,B.J9)(this.props,!1),{className:"recharts-area-curve",layout:s,type:i,connectNulls:c,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var n=this,a=this.props,r=a.points,s=a.baseLine,i=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,m=this.state,f=m.prevPoints,h=m.prevBaseLine;return l.createElement(g.Ay,{begin:o,duration:c,isActive:i,easing:u,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(a){var i=a.t;if(f){var o,c=f.length/r.length,u=r.map(function(e,t){var n=Math.floor(t*c);if(f[n]){var a=f[n],r=(0,R.Dj)(a.x,e.x),s=(0,R.Dj)(a.y,e.y);return J(J({},e),{},{x:r(i),y:s(i)})}return e});return o=(0,R.Et)(s)&&"number"==typeof s?(0,R.Dj)(h,s)(i):A()(s)||O()(s)?(0,R.Dj)(h,0)(i):s.map(function(e,t){var n=Math.floor(t*c);if(h[n]){var a=h[n],r=(0,R.Dj)(a.x,e.x),s=(0,R.Dj)(a.y,e.y);return J(J({},e),{},{x:r(i),y:s(i)})}return e}),n.renderAreaStatically(u,o,e,t)}return l.createElement(M.W,null,l.createElement("defs",null,l.createElement("clipPath",{id:"animationClipPath-".concat(t)},n.renderClipRect(i))),l.createElement(M.W,{clipPath:"url(#animationClipPath-".concat(t,")")},n.renderAreaStatically(r,s,e,t)))})}},{key:"renderArea",value:function(e,t){var n=this.props,a=n.points,r=n.baseLine,s=n.isAnimationActive,i=this.state,l=i.prevPoints,o=i.prevBaseLine,c=i.totalLength;return s&&a&&a.length&&(!l&&c>0||!P()(l,a)||!P()(o,r))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(a,r,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,a=t.dot,r=t.points,s=t.className,i=t.top,o=t.left,c=t.xAxis,u=t.yAxis,d=t.width,m=t.height,f=t.isAnimationActive,h=t.id;if(n||!r||!r.length)return null;var p=this.state.isAnimationFinished,x=1===r.length,y=(0,b.A)("recharts-area",s),v=c&&c.allowDataOverflow,g=u&&u.allowDataOverflow,j=v||g,w=A()(h)?this.id:h,D=null!==(e=(0,B.J9)(a,!1))&&void 0!==e?e:{r:3,strokeWidth:2},N=D.r,k=D.strokeWidth,S=((0,B.sT)(a)?a:{}).clipDot,O=void 0===S||S,E=2*(void 0===N?3:N)+(void 0===k?2:k);return l.createElement(M.W,{className:y},v||g?l.createElement("defs",null,l.createElement("clipPath",{id:"clipPath-".concat(w)},l.createElement("rect",{x:v?o:o-d/2,y:g?i:i-m/2,width:v?d:2*d,height:g?m:2*m})),!O&&l.createElement("clipPath",{id:"clipPath-dots-".concat(w)},l.createElement("rect",{x:o-E/2,y:i-E/2,width:d+E,height:m+E}))):null,x?null:this.renderArea(j,w),(a||x)&&this.renderDots(j,O,w),(!f||p)&&L.Z.renderCallByParent(this.props,r))}}],n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],t&&G(a.prototype,t),n&&G(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(l.PureComponent);Y($,"displayName","Area"),Y($,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!I.m.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),Y($,"getBaseValue",function(e,t,n,a){var r=e.layout,s=e.baseValue,i=t.props.baseValue,l=null!=i?i:s;if((0,R.Et)(l)&&"number"==typeof l)return l;var o="horizontal"===r?a:n,c=o.scale.domain();if("number"===o.type){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return"dataMin"===l?d:"dataMax"===l?u:u<0?u:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===l?c[0]:"dataMax"===l?c[1]:c[0]}),Y($,"getComposedData",function(e){var t,n=e.props,a=e.item,r=e.xAxis,s=e.yAxis,i=e.xAxisTicks,l=e.yAxisTicks,o=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,m=e.displayedData,f=e.offset,h=n.layout,p=u&&u.length,x=$.getBaseValue(n,a,r,s),y="horizontal"===h,v=!1,b=m.map(function(e,t){p?n=u[d+t]:Array.isArray(n=(0,C.kr)(e,c))?v=!0:n=[x,n];var n,a=null==n[1]||p&&null==(0,C.kr)(e,c);return y?{x:(0,C.nb)({axis:r,ticks:i,bandSize:o,entry:e,index:t}),y:a?null:s.scale(n[1]),value:n,payload:e}:{x:a?null:r.scale(n[1]),y:(0,C.nb)({axis:s,ticks:l,bandSize:o,entry:e,index:t}),value:n,payload:e}});return t=p||v?b.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return y?{x:e.x,y:null!=t&&null!=e.y?s.scale(t):null}:{x:null!=t?r.scale(t):null,y:e.y}}):y?s.scale(x):r.scale(x),J({points:b,baseLine:t,layout:h,isRange:v},f)}),Y($,"renderDotItem",function(e,t){var n;if(l.isValidElement(e))n=l.cloneElement(e,t);else if(w()(e))n=e(t);else{var a=(0,b.A)("recharts-area-dot","boolean"!=typeof e?e.className:""),r=t.key,s=W(t,z);n=l.createElement(T.c,V({},s,{key:r,className:a}))}return n});var Z=n(92889),ee=n(15451),et=n(89099);let en=e=>{let{active:t,payload:n,label:r}=e,s=(0,et.useRouter)();if(t&&n&&n.length){let e=n[0].payload,t=(0,ee.GP)(new Date(e.createdAt),"MMM dd, yyyy, hh:mm:ss a");return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-3 shadow text-xs min-w-[140px]",style:{pointerEvents:"auto"},children:[(0,a.jsx)("div",{className:"mb-1 text-black font-semibold",children:t}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1 text-black font-medium",children:[(0,a.jsx)("span",{children:"SOV"}),(0,a.jsxs)("span",{className:"font-bold text-green-600",children:[e.sov.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1 text-black font-medium",children:[(0,a.jsx)("span",{children:"Run ID:"}),(0,a.jsx)("span",{children:e.runId})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1 text-black font-medium",children:[(0,a.jsx)("span",{children:"Questions:"}),(0,a.jsx)("span",{children:e.questions})]}),(0,a.jsx)("button",{className:"text-blue-600 underline text-xs mt-2 block",type:"button",onClick:()=>s.push("/aeo/history/questions?runId=".concat(e.runId)),children:"View Questions"})]})}return null},ea=e=>{let{cx:t,cy:n}=e;return(0,a.jsx)("circle",{cx:t,cy:n,r:6,fill:"#6366f1",stroke:"#fff",strokeWidth:2})},er=e=>{let{chartData:t,selectedQuerySet:n,runs:r,dropdownOpen:s,setDropdownOpen:i,setSelectedQuerySet:l,dropdownRef:o,isFetching:c}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"w-full h-56 relative",children:0===t.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:c?"Loading...":"No data found"}):(0,a.jsx)(f.u,{width:"100%",height:"100%",children:(0,a.jsxs)(h.b,{data:[...t].reverse(),margin:{top:20,right:40,left:0,bottom:0},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:.35}),(0,a.jsx)("stop",{offset:"60%",stopColor:"#6366f1",stopOpacity:.12}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:0})]})}),(0,a.jsx)(p.d,{vertical:!1,strokeDasharray:"3 3",stroke:"#f3f3f3"}),(0,a.jsx)(x.W,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#888"},dy:8}),(0,a.jsx)(y.h,{domain:[0,100],axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#888"},dx:-8,ticks:[0,25,50,75,100]}),(0,a.jsx)(v.m,{content:(0,a.jsx)(en,{}),cursor:{stroke:"#6366f1",strokeWidth:1,opacity:.1}}),(0,a.jsx)($,{type:"monotone",dataKey:"value",stroke:"none",fill:"url(#colorUv)"}),(0,a.jsx)(Z.N,{type:"monotone",dataKey:"value",stroke:"#6366f1",strokeWidth:2.5,dot:(0,a.jsx)(ea,{}),activeDot:{r:6}})]})})})})};var es=n(75683);let ei=e=>{let{options:t,selected:n,onSelect:r,placeholder:s="Select an option",className:i="",widthClass:c="w-48"}=e,[u,d]=(0,l.useState)(!1),m=(0,l.useRef)(null);(0,o.A)([m],()=>d(!1));let f=t.find(e=>e.value===n);return(0,a.jsxs)("div",{ref:m,className:"relative ".concat(i),children:[(0,a.jsxs)("button",{type:"button",className:"flex items-center justify-between rounded-lg shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)] outline-1 outline-offset-[-1px] outline-neutral-200 bg-white px-3 py-2 hover:shadow transition-all min-w-[120px] ".concat(c),onClick:()=>d(e=>!e),children:[(0,a.jsx)("span",{className:"text-neutral-950 text-xs font-normal truncate",children:f?f.label:s}),(0,a.jsx)(es.q2p,{className:"text-black text-lg -ml-1",size:16})]}),u&&(0,a.jsxs)("div",{className:"absolute right-0 top-12 z-50 bg-white border border-gray-200 rounded shadow ".concat(c," max-h-56 overflow-y-auto"),children:[0===t.length&&(0,a.jsx)("div",{className:"px-4 py-2 text-gray-400",children:"No options"}),t.map(e=>(0,a.jsxs)("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 ".concat(n===e.value?"bg-gray-100 font-bold":""),onClick:()=>{r(e.value,e),d(!1)},children:[(0,a.jsx)("div",{className:"font-medium truncate",children:e.label}),e.description&&(0,a.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.description})]},e.value))]})]})},el=new Date,eo=new Date(el);eo.setDate(el.getDate()-7),eo.setHours(0,0,0,0);let ec=new Date(el);ec.setHours(23,59,59,999);let eu={startDate:eo.getTime(),endDate:ec.getTime(),key:"selection"},ed=()=>{var e,t,n,f,h,p;let[x,y]=(0,l.useState)([]),[v,b]=(0,l.useState)(!1),[g,j]=(0,l.useState)(""),[w,D]=(0,l.useState)(null),[N,k]=(0,l.useState)(null),[A,S]=(0,l.useState)(!1),[O,E]=(0,l.useState)((0,c.vU)()||eu),[P,_]=(0,l.useState)(null),[T,M]=(0,l.useState)(!0),L=(0,l.useRef)(null);(0,o.A)([L],()=>S(!1));let I=async(e,t)=>{var n;if(!e||!t.startDate||!t.endDate)return;let a="/orgs/".concat(null===(n=i.A.current())||void 0===n?void 0:n.id,"/aeoanalysis/tasks?queryset_id=").concat(e);t.startDate&&t.endDate&&(a+="&start_date=".concat(t.startDate,"&end_date=").concat(t.endDate));let{data:r,error:l}=await s.A.doGet({path:a});if(l){k("Failed to fetch runs"),y([]),b(!1);return}return y(r.tasks||[]),r.tasks.length>0&&D(r.tasks[0]),T&&M(!1),r.tasks.length},R="My Brand";for(let n of(null==P?void 0:null===(t=P.result)||void 0===t?void 0:null===(e=t.info)||void 0===e?void 0:e.args)||[])if("brand"===n.id){R=(n.value||"").trim().split(",")[0].trim();break}let C=x.map(e=>{var t,n,a,r,s,i,l,o,c;return{date:new Date(Number(e.created_at)).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}),value:Number(null!==(l=null===(n=e.data)||void 0===n?void 0:null===(t=n.result)||void 0===t?void 0:t.sov)&&void 0!==l?l:0),runId:e.id,questions:Number(null!==(o=null===(r=e.data)||void 0===r?void 0:null===(a=r.result)||void 0===a?void 0:a.num_questions)&&void 0!==o?o:0),highlight:!1,sov:Number(null!==(c=null===(i=e.data)||void 0===i?void 0:null===(s=i.result)||void 0===s?void 0:s.sov)&&void 0!==c?c:0),createdAt:Number(e.created_at)}});(0,l.useEffect)(()=>{g&&O.startDate&&O.endDate&&I(g,O)},[g,O]),(0,l.useEffect)(()=>{(async()=>{b(!0);let e=await i.A.checkAndGetAeoProject();if(!e)return k("Project not found"),b(!1),r.A.show("Create new project",(0,a.jsx)(d.default,{}),!1,"90%");j(e.id),setTimeout(()=>{I(g,O),b(!1)},0)})()},[]);let B=null==w?void 0:null===(n=w.data)||void 0===n?void 0:n.result;(0,l.useEffect)(()=>{let e=async()=>{if(!w)return;k(null);let e="/orgs/".concat(i.A.current().id,"/aeoanalysis/tasks/").concat(w.id,"?fetch_result=true"),t=await s.A.doGet({path:e});if(t.error){k("Failed to fetch analysis data"),b(!1);return}_(t.data.task)};w&&e()},[w]);let F=[{label:"Total Questions Run",value:null!==(f=null==B?void 0:B.num_questions)&&void 0!==f?f:"-"},{label:"My SOV (Brand Mentions)",value:(null==B?void 0:B.sov)!==void 0?"".concat(Number(B.sov).toFixed(2),"%"):"-"},{label:"All Brand Mentions",value:null!==(h=null==B?void 0:B.num_brands)&&void 0!==h?h:"-"},{label:"Citations",value:null!==(p=null==B?void 0:B.num_sources)&&void 0!==p?p:"-"}],z=x.map(e=>{var t;return{label:(null===(t=e.data)||void 0===t?void 0:t.queryset_name)||"Unnamed Run",value:e.id,description:new Date(Number(e.created_at)).toLocaleString()}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{}),(0,a.jsxs)("div",{className:"px-5 md:px-5 py-5 md:py-4 bg-white fontDmSans",children:[(0,a.jsx)(m,{header:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-base font-semibold text-[#222] mb-1",children:"Visibility Score"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Percentage of responses mentioning your Brand over the selected date range."})]}),(0,a.jsx)("div",{className:"mt-2 md:mt-0",children:(0,a.jsx)(c.Ay,{handleDateRangeSelection:e=>I(g,{...e,key:"selection"})})})]}),children:(0,a.jsx)(er,{chartData:C,selectedQuerySet:w,runs:x,dropdownOpen:A,setDropdownOpen:S,setSelectedQuerySet:D,dropdownRef:L,isFetching:T})}),x.length>0&&(0,a.jsxs)("div",{className:"z-50 text-xs font-normal -mx-2 md:-mx-5 p-5 mt-10 text-gray-600 bg-neutral-200/40 flex flex-col md:flex-row justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["Results For Last Run Completed On",(0,a.jsx)("span",{className:"font-bold text-black",children:w?new Date(Number(w.created_at)).toLocaleString():"-"})]}),(0,a.jsx)("div",{className:"flex items-center gap-3 mt-2 md:mt-0 relative",children:(0,a.jsx)("div",{ref:L,className:"relative",children:(0,a.jsx)(ei,{options:z,selected:null==w?void 0:w.id,onSelect:e=>{D(x.find(t=>t.id===e)||null)},placeholder:"Run",widthClass:"w-48"})})})]}),(0,a.jsx)("div",{className:"p-4 bg-white fontDmSans",children:!v&&!N&&B&&(0,a.jsxs)("div",{className:"flex flex-col md:grid md:grid-cols-2 gap-8 items-start",children:[(0,a.jsx)(m,{header:"Share Of Voice",children:(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:F.map(e=>(0,a.jsxs)("div",{className:"bg-primary rounded-lg py-4 px-3 flex flex-col justify-center min-h-[80px]",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("div",{className:"w-1 h-4 bg-indigo-400 rounded-2xl mr-2"}),(0,a.jsx)("span",{className:"textPrimary500 text-xs font-medium",children:e.label})]}),(0,a.jsx)("div",{className:" text-zinc-900 text-base font-semibold",children:e.value})]},e.label))})})}),(0,a.jsx)("div",{className:"border-0 md:border-l-[0.8px] border-neutral-200 w-full flex flex-col items-start justify-center md:pl-5 mb-8 md:mb-0",children:(0,a.jsx)(m,{header:"Brand Visibility Index",subheader:"Top 10 brands ranked by SOV",children:(0,a.jsx)("div",{className:"w-full overflow-x-auto max-h-[320px] overflow-y-auto scrollbar-hide",children:(0,a.jsxs)("table",{className:"w-full text-xs min-w-[340px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-gray-400",children:[(0,a.jsx)("th",{className:"text-left text-slate-500 text-xs font-normal"}),(0,a.jsx)("th",{className:"text-left text-slate-500 text-xs font-normal",children:"Brands"}),(0,a.jsx)("th",{className:"text-left text-slate-500 text-xs font-normal",children:"SOV"}),(0,a.jsx)("th",{className:"text-left text-slate-500 text-xs font-normal",children:"Questions"})]})}),(0,a.jsx)("tbody",{children:(()=>{var e,t;let n=(null==P?void 0:null===(e=P.result)||void 0===e?void 0:e.others)||[],r=(null==P?void 0:null===(t=P.result)||void 0===t?void 0:t.own)?{name:P.result.own.name||R,sov:P.result.own.sov,mentions:Array.isArray(P.result.own.queries)?P.result.own.queries.length:P.result.own.mentions||0}:null;return[...n.map(e=>({name:e.name,sov:e.sov,mentions:Array.isArray(e.queries)?e.queries.length:e.mentions||0}))||[],...r?[r]:[]].sort((e,t)=>(t.sov||0)-(e.sov||0)).slice(0,10).map((e,t)=>{var n;return(0,a.jsxs)("tr",{className:"text-[#222] font-medium",children:[(0,a.jsx)("td",{children:t+1}),(0,a.jsxs)("td",{className:"py-1",children:[" ",e.name]}),(0,a.jsx)("td",{className:"py-1 font-bold",children:void 0!==e.sov?"".concat(Number(e.sov).toFixed(2),"%"):"-"}),(0,a.jsx)("td",{className:"py-1",children:null!==(n=e.mentions)&&void 0!==n?n:"-"})]},e.name)})})()})]})})})})]})})]})]})}},70753:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/overview",function(){return n(42754)}])},94344:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(14232);let r=(e,t)=>{(0,a.useEffect)(()=>{let n=n=>{!e.some(e=>e.current&&e.current.contains(n.target))&&t(n)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[e,t])}}},e=>{var t=t=>e(e.s=t);e.O(0,[5711,7141,9034,7092,1153,6343,4249,636,6593,8792],()=>t(70753)),_N_E=e.O()}]);