(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6709],{7492:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var a=r(37876);r(14232);var s=r(69241),l=r(95313);let i={default:"bg-gray-500 hover:bg-gray-600 text-white",white:"bg-white hover:bg-gray-100 text-indigo-700 border border-indigo-700",primary:"bgHardBlue hover:bgHardBlue text-white",danger:"bg-red-600 hover:bg-red-700 text-white"},n=e=>{let{variant:t="default",loading:r=!1,children:n,className:o,loaderIcon:d,...c}=e;return(0,a.jsx)("button",{className:(0,s.A)(" text-xs font-semibold px-4 py-2 rounded-lg transition cursor-pointer flex items-center justify-center gap-2",i[t],o),disabled:r||c.disabled,...c,children:r?d||(0,a.jsx)(l.A,{className:"h-4 w-4 animate-spin"}):n})}},32722:(e,t,r)=>{"use strict";function a(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}r.d(t,{_:()=>a})},35712:(e,t,r)=>{"use strict";function a(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}r.d(t,{_:()=>a})},42059:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(37876),s=r(14232),l=r(89099),i=r(43598);let n=()=>{let e=(0,l.useRouter)(),t=e.asPath,[r,n]=(0,s.useState)(""),o=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))).map(e=>"aeo"===e?r:e),d=o.map((s,l)=>{let i=l===o.length-1;return(0,a.jsxs)("div",{className:"inline",children:[(0,a.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(i)return;let a=o.slice(0,l+1),s="/".concat(a.map(e=>e===r?1===a.length?"/aeo/overview":"aeo":e).join("/"));s!==t&&s!=="/".concat(o[0])&&e.push(s)},children:s.replace(/-/g," ")}),!i&&(0,a.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},l)});return(0,s.useEffect)(()=>{(async()=>{let e=await i.A.currentAeoProject();e&&n(e.name)})()},[]),(0,a.jsx)("div",{children:d})},o=e=>{let{children:t}=e;return(0,a.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap sticky top-0 z-20",children:[(0,a.jsx)(n,{}),t&&(0,a.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},42874:(e,t,r)=>{"use strict";r.d(t,{_:()=>l});var a=r(32722),s=r(35712);function l(e,t,r){return(0,a._)(e,t),(0,s._)(r,"get"),r.get?r.get.call(e):r.value}},69241:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=function(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a)}return s}(e))&&(a&&(a+=" "),a+=t);return a}},70430:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(37876),s=r(14232),l=r(74562),i=r(65259),n=r(43598),o=r(49034);let d=e=>{let{id:t,args:r,setRefetchQuery:o}=e,[d,x]=(0,s.useState)(!1),[f,h]=(0,s.useState)(null),[p,g]=(0,s.useState)([]),v=e=>{let t=p.find(t=>t.id===e.target.id);t&&(t.value=e.target.value),g(p.map(r=>r.id===e.target.id&&null!=t?t:r))},b=async e=>{e.preventDefault();let r=Object.fromEntries(new FormData(e.target));for(let e in r){let t=r[e].toString().trim();if(!t)return;r[e]=t}x(!0);let a=await i.A.doPost({path:"/orgs/".concat(n.A.current().id,"/querysets/").concat(t),data:{data:{args:r}}});if(a.error){h(a.error.message);return}a.data&&(l.A.hide(),o(e=>!e)),x(!1)},j=(0,s.useCallback)(async()=>{let{data:e,error:t}=await i.A.doGet({path:"/orgs/".concat(n.A.current().id,"/aeo/workflows")});if(t){h("Error fetching workflows"),console.log(t.message);return}e&&g(e.workflows.filter(e=>"qgen"===e.type)[0].args.filter(e=>e.used_for.includes("analysis")).map(e=>({...e,value:r[e.id]})))},[r]);return(0,s.useEffect)(()=>{j()},[j]),(0,a.jsxs)("form",{className:"max-h-[60vh] overflow-auto flex flex-col",onSubmit:b,children:[(0,a.jsx)("div",{children:p.length>0&&p.map(e=>"textarea"===e.editor?(0,a.jsx)(u,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):"country_dropdown"===e.editor?(0,a.jsx)(m,{id:e.id,name:e.name,value:e.value,description:e.description,required:e.required},e.id):(0,a.jsx)(c,{id:e.id,name:e.name,value:e.value,changeHandler:v,description:e.description,required:e.required},e.id))}),f&&(0,a.jsx)("div",{className:"text-red-500 font-medium text-base mt-4 mx-1",children:f}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"bgLightBlue text-white font-semibold mt-4 mx-1 py-2 px-4 cursor-pointer rounded-lg hover:bgMediumBlue transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Update"})]})},c=e=>{let{id:t,name:r,description:l,required:i,value:n}=e,[o,d]=(0,s.useState)(n);return(0,a.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,a.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,a.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:l}),(0,a.jsx)("input",{type:"text",id:t,name:t,value:o,onChange:e=>d(e.target.value),required:i,className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},u=e=>{let{id:t,name:r,description:l,required:i,value:n}=e,[o,d]=(0,s.useState)(n);return(0,a.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,a.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,a.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:l}),(0,a.jsx)("textarea",{id:t,name:t,required:i,value:o,onChange:e=>d(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition"})]})},m=e=>{let{id:t,name:r,description:l,required:i,value:n}=e,d=(0,o.oj)(),[c,u]=(0,s.useState)(n);return(0,a.jsxs)("div",{className:"mt-4 flex flex-col mb-1",children:[(0,a.jsx)("label",{className:"text-neutral-500 font-medium text-base mx-1",htmlFor:t,children:r}),(0,a.jsx)("p",{className:"text-neutral-500 font-medium text-xs mx-1",children:l}),(0,a.jsx)("select",{id:t,name:t,required:i,value:c,onChange:e=>u(e.target.value),className:"border border-neutral-300 text-neutral-400 font-medium bg-primary max-w-3xl rounded-lg p-3 mt-3 mx-1 focus:ring-1 focus:ring-blue-400 focus:border-blue-400 outline-none transition",children:Object.values(d).map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})}},80498:(e,t,r)=>{"use strict";r.d(t,{_:()=>l});var a=r(32722),s=r(35712);function l(e,t,r,l){return(0,a._)(e,t),(0,s._)(r,"set"),!function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=r}}(e,r,l),l}},86231:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(37876),s=r(42059),l=r(74562),i=r(70430),n=r(65259),o=r(43598),d=r(14232),c=r(6630),u=r(7492),m=r(94344),x=r(91163);let f=()=>{let[e,t]=(0,d.useState)(null),[r,f]=(0,d.useState)([]),[h,p]=(0,d.useState)(!1),g=(0,d.useRef)(null);(0,m.A)([g],()=>p(!1));let v=async()=>{var e;let{data:t,error:r}=await n.A.doGet({path:"/orgs/".concat(null===(e=o.A.current())||void 0===e?void 0:e.id,"/querysets")});if(r){console.error("Error fetching projects:",r);return}f(t.querysets.map(e=>({id:e.id,org_id:e.org_id,name:e.name,data:e.data||{}})))},b=e=>{let t=r.find(t=>t.id===e.id);return t?t.data.args:{}},j=async()=>{try{let e=await o.A.checkAndGetAeoProject();if(!e)return l.A.show("Create new project",(0,a.jsx)(c.default,{}),!0,"90%");t(e)}catch(e){console.error("Error fetching current project:",e)}};(0,d.useEffect)(()=>{j(),v()},[]),(0,d.useEffect)(()=>{e&&o.A.setCurrentAeoProject(e)},[e]);let w=r.map(e=>({label:e.name,value:e.id}));return(0,a.jsxs)("div",{children:[(0,a.jsx)(s.A,{children:(0,a.jsx)(u.$,{variant:"primary",onClick:()=>l.A.show("Create new project",(0,a.jsx)(c.default,{}),!1,"90%"),children:"Create New Project"})}),(0,a.jsxs)("div",{className:"flex flex-col items-start justify-start bg-white p-4 w-full h-[calc(100vh-10rem)] mx-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-700",children:"Manage AEO Projects"}),(0,a.jsxs)("div",{className:"text-md mb-6",children:["Current Project:"," ",(0,a.jsx)("span",{className:"font-semibold text-indigo-700",children:(null==e?void 0:e.name)||"None"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:"Select a project from the list below to manage it."}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{ref:g,className:"relative",children:(0,a.jsx)(x.A,{options:w,selected:null==e?void 0:e.id,onSelect:e=>{t(r.find(t=>t.id===e)||null)},placeholder:"Select a project",widthClass:"w-48"})}),e&&(0,a.jsx)(u.$,{variant:"primary",onClick:()=>l.A.show("Edit Business Profile",(0,a.jsx)(i.A,{id:e.id,args:b(e)||{},setRefetchQuery:()=>v()})),children:"Edit Project"})]})]})]})}},91163:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(37876),s=r(14232),l=r(75683),i=r(94344);let n=e=>{let{options:t,selected:r,onSelect:n,placeholder:o="Select an option",className:d="",widthClass:c="w-48"}=e,[u,m]=(0,s.useState)(!1),x=(0,s.useRef)(null);(0,i.A)([x],()=>m(!1));let f=t.find(e=>e.value===r);return(0,a.jsxs)("div",{ref:x,className:"relative ".concat(d),children:[(0,a.jsxs)("button",{type:"button",className:"flex items-center justify-between rounded-lg shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)] outline-1 outline-offset-[-1px] outline-neutral-200 bg-white px-3 py-2 hover:shadow transition-all min-w-[120px] ".concat(c),onClick:()=>m(e=>!e),children:[(0,a.jsx)("span",{className:"text-neutral-950 text-xs font-normal truncate",children:f?f.label:o}),(0,a.jsx)(l.q2p,{className:"text-black text-lg -ml-1",size:16})]}),u&&(0,a.jsxs)("div",{className:"absolute right-0 top-12 z-50 bg-white border border-gray-200 rounded shadow ".concat(c," max-h-56 overflow-y-auto"),children:[0===t.length&&(0,a.jsx)("div",{className:"px-4 py-2 text-gray-400",children:"No options"}),t.map(e=>(0,a.jsxs)("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 ".concat(r===e.value?"bg-gray-100 font-bold":""),onClick:()=>{n(e.value,e),m(!1)},children:[(0,a.jsx)("div",{className:"font-medium truncate",children:e.label}),e.description&&(0,a.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.description})]},e.value))]})]})}},94344:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(14232);let s=(e,t)=>{(0,a.useEffect)(()=>{let r=r=>{!e.some(e=>e.current&&e.current.contains(r.target))&&t(r)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[e,t])}},95313:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(95551).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},96721:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/manage-project",function(){return r(86231)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[5711,9034,4249,636,6593,8792],()=>t(96721)),_N_E=e.O()}]);