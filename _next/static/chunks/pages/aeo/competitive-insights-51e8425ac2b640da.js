(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8297],{6246:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(95551).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},14084:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(37876),l=s(14232);let n=e=>{let{children:t,headers:s,data:n,isLoading:a,rowKey:i,renderCell:o,className:c}=e,[d,u]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{a&&setTimeout(()=>{u(!0)},1500)},[a]),(0,r.jsxs)("div",{className:"bg-white overflow-auto ".concat((null==c?void 0:c.table)||""," pt-0"),children:[(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:s.map(e=>(0,r.jsx)("th",{className:"p-2 md:p-3 lg:p-4 sticky top-0 bg-white z-10 text-start ".concat((null==c?void 0:c.header)||""),children:e.label},e.key))})}),a?(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:s.length,className:"text-center py-12 text-gray-400",children:d&&(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-b-white border-indigo-600"})})})})}):(0,r.jsx)("tbody",{children:0===n.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:s.length,className:"text-center py-12 text-gray-400",children:"No data found."})}):n.map((e,t)=>(0,r.jsx)("tr",{className:"text-start hover:bg-gray-200 ".concat(null==c?void 0:c.body),children:s.map((t,s)=>(0,r.jsx)("td",{className:"p-2 md:p-3 lg:p-4 ".concat(null==c?void 0:c.bodyData),children:o?o(e,t,s):e[t.key]},t.key))},i(e,t)))})]}),n.length>0&&!a&&t]})}},28067:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(95551).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},32722:(e,t,s)=>{"use strict";function r(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}s.d(t,{_:()=>r})},35712:(e,t,s)=>{"use strict";function r(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}s.d(t,{_:()=>r})},42059:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(37876),l=s(14232),n=s(89099),a=s(43598);let i=()=>{let e=(0,n.useRouter)(),t=e.asPath,[s,i]=(0,l.useState)(""),o=t.split("/").filter(e=>!(""===e||e.startsWith("?")||e.startsWith("#"))).map(e=>"aeo"===e?s:e),c=o.map((s,l)=>{let n=l===o.length-1;return(0,r.jsxs)("div",{className:"inline",children:[(0,r.jsx)("span",{className:"text-[#737373] font-medium capitalize cursor-pointer hover:underline",onClick:()=>{if(n)return;let s="/".concat(o.slice(0,l+1).join("/"));s!==t&&s!=="/".concat(o[0])&&e.push(s)},children:s.replace(/-/g," ")}),!n&&(0,r.jsx)("span",{className:"text-[#737373] font-medium",children:" > "})]},l)});return(0,l.useEffect)(()=>{(async()=>{let e=await a.A.currentAeoProject();e&&i(e.name)})()},[]),(0,r.jsx)("div",{children:c})},o=e=>{let{children:t}=e;return(0,r.jsxs)("div",{className:"w-full bg-white border-b-[1px] border-gray-200 p-4 flex justify-between items-center gap-4 flex-wrap sticky top-0 z-20",children:[(0,r.jsx)(i,{}),t&&(0,r.jsx)("div",{className:"flex gap-4 items-center justify-between",children:t})]})}},42874:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var r=s(32722),l=s(35712);function n(e,t,s){return(0,r._)(e,t),(0,l._)(s,"get"),s.get?s.get.call(e):s.value}},48963:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(95551).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},49279:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(37876),l=s(14232),n=s(7972),a=s(9614),i=s(89099),o=s(65259),c=s(43598),d=s(42059),u=s(74562),x=s(6630),m=s(94344),h=s(98188),f=s(14084);let p=()=>{var e,t,s,a,p,v,b,y,j,w,N,k;let A=(0,i.useRouter)().query.runId,[_,C]=(0,l.useState)([]),[S,E]=(0,l.useState)(null),[P,z]=(0,l.useState)(null),[q,F]=(0,l.useState)(!1),[L,M]=(0,l.useState)(!1),[R,T]=(0,l.useState)(null),[D,I]=(0,l.useState)(!1),[G,B]=(0,l.useState)(1),[K,O]=(0,l.useState)(10),W=(0,l.useRef)(null),X=(0,l.useRef)(null);(0,m.A)([W,X],()=>I(!1));let H="My Brand";if(null==P?void 0:null===(t=P.result)||void 0===t?void 0:null===(e=t.info)||void 0===e?void 0:e.args){for(let e of P.result.info.args)if("brand"===e.id){H=(e.value||"").trim().split(",")[0].trim();break}}let Q=[{name:H,sov:(null==P?void 0:null===(a=P.result)||void 0===a?void 0:null===(s=a.own)||void 0===s?void 0:s.sov)||0,queries:(null==P?void 0:null===(v=P.result)||void 0===v?void 0:null===(p=v.own)||void 0===p?void 0:p.queries)||[]},...(null==P?void 0:null===(b=P.result)||void 0===b?void 0:b.others)||[]];Q.sort((e,t)=>t.sov-e.sov);let V=Math.ceil(Q.length/K),J=Q.slice((G-1)*K,G*K);(0,l.useEffect)(()=>{G>V&&V>0?B(V):0===V&&1!==G&&B(1)},[Q.length,V,G]),(0,l.useEffect)(()=>{(async()=>{F(!0),T(null);let e=await c.A.checkAndGetAeoProject();if(!e)return T("Project not found"),F(!1),u.A.show("Create new project",(0,r.jsx)(x.default,{}),!0,"90%");let{data:t,error:s}=await o.A.doGet({path:"/orgs/".concat(c.A.current().id,"/aeoanalysis/tasks?queryset_id=").concat(e.id)});if(s){T("Failed to fetch runs"),F(!1);return}if(C(t.tasks||[]),A&&t.tasks){let e=t.tasks.find(e=>e.id===A);e?E(e):t.tasks.length>0&&E(t.tasks[0])}else t.tasks&&t.tasks.length>0&&E(t.tasks[0]);F(!1)})()},[A]);let U=e=>{E(e),I(!1)};(0,l.useEffect)(()=>{let e=async()=>{if(!S)return;M(!0),T(null);let{data:e,error:t}=await o.A.doGet({path:"/orgs/".concat(c.A.current().id,"/aeoanalysis/tasks/").concat(S.id,"?fetch_result=true")});if(t){T("Failed to fetch analysis data"),F(!1);return}z(e.task),M(!1)};S&&e()},[S]);let Y=(null==S?void 0:S.name)||(null==S?void 0:null===(y=S.data)||void 0===y?void 0:y.queryset_name)||(null==S?void 0:S.id)||"-",Z=S?new Date(Number(S.created_at)).toLocaleString():"-",$=null!==(k=null==P?void 0:null===(N=P.result)||void 0===N?void 0:null===(w=N.all)||void 0===w?void 0:null===(j=w.queries)||void 0===j?void 0:j.length)&&void 0!==k?k:"-";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{}),(0,r.jsx)("div",{className:"sticky top-[57px] z-20 bg-violet-50 flex flex-col md:flex-row md:items-center md:justify-between mb-2 md:mb-0 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-[#6C47FF] text-base font-medium relative",children:[(0,r.jsx)("span",{className:"text-slate-600 text-xs font-semibold pr-2",children:"Select Run :"}),(0,r.jsxs)("span",{ref:W,className:"text-slate-500 text-xs font-semibold ml-2 flex items-center gap-1 cursor-pointer select-none relative",onClick:()=>I(e=>!e),children:[Y,(0,r.jsx)(n.fK4,{size:16}),D&&(0,r.jsx)("div",{ref:X,className:"absolute left-0 top-6 z-10 bg-white border border-gray-200 rounded shadow w-48 max-h-56 overflow-y-auto",children:_.map(e=>{var t;return(0,r.jsxs)("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 ".concat((null==S?void 0:S.id)===e.id?"bg-gray-100 font-bold":""),onClick:()=>U(e),children:[(0,r.jsx)("div",{className:"font-medium",children:e.name||(null===(t=e.data)||void 0===t?void 0:t.queryset_name)||e.id}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:new Date(Number(e.created_at)).toLocaleString()})]},e.id)})})]}),(0,r.jsx)("span",{className:"text-slate-500 text-xs font-semibold ml-2 pr-2",children:Z}),(0,r.jsxs)("span",{className:"text-slate-500 text-xs font-semibold ml-1",children:[$," Questions"]})]})}),(0,r.jsx)(f.A,{headers:[{label:(0,r.jsx)(g,{label:"Brand"}),key:"brand"},{label:(0,r.jsx)(g,{label:"Mentions"}),key:"mentions"},{label:(0,r.jsx)(g,{label:"Share of Voice"}),key:"sov"}],data:J,isLoading:q||L,rowKey:e=>e.name,renderCell:(e,t)=>{if("brand"===t.key)return e.name===H?(0,r.jsx)("span",{className:"text-[#4F46E5] font-bold",children:e.name}):e.name;if("mentions"===t.key)return e.queries.length;if("sov"===t.key){let t=e.sov;return"number"==typeof t?Number.isInteger(t)?"".concat(t," %"):"".concat(t.toFixed(2)," %"):"--"}return t.key in e?e[t.key]:void 0},className:{table:"h-[calc(100vh-12.1875rem)]",header:"border-b border-neutral-200 text-neutral-500 text-xs font-medium bg-neutral-100!",body:"border-b border-neutral-200",bodyData:"text-sm"},children:(0,r.jsx)(h.A,{currentPage:G,setCurrentPage:B,totalItems:Q.length,itemsPerPage:K,setItemsPerPage:O})})]})},g=e=>{let{label:t}=e;return(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)("span",{children:t}),(0,r.jsx)(a.H2l,{size:16,className:"text-neutral-500"})]})}},75889:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aeo/competitive-insights",function(){return s(49279)}])},80498:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var r=s(32722),l=s(35712);function n(e,t,s,n){return(0,r._)(e,t),(0,l._)(s,"set"),!function(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=s}}(e,s,n),n}},94344:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(14232);let l=(e,t)=>{(0,r.useEffect)(()=>{let s=s=>{!e.some(e=>e.current&&e.current.contains(s.target))&&t(s)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[e,t])}},98188:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(37876),l=s(14232),n=s(6246),a=s(28067),i=s(48963);let o=e=>{let{currentPage:t,setCurrentPage:s,totalItems:o,itemsPerPage:c,setItemsPerPage:d,hidePageNumbers:u=!1}=e,[x,m]=(0,l.useState)(!1),h=Math.ceil(o/c);if(o<=1)return null;let f=e=>{e>=1&&e<=h&&s(e)},p=e=>{d(e),s(1),m(!1)};return(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 px-6 bg-white border-t border-gray-200",children:[(0,r.jsx)("div",{className:"flex items-center text-sm text-gray-600",children:(0,r.jsxs)("span",{children:["Page ",t," of ",h]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>f(t-1),disabled:1===t,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(1===t?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(n.A,{size:16})}),!u&&(0,r.jsx)("div",{className:"flex items-center gap-1 mx-2",children:(()=>{let e=[];if(h<=5)for(let s=1;s<=h;s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm font-medium transition-colors cursor-pointer ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));else{if(e.push((0,r.jsx)("button",{onClick:()=>f(1),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(1===t?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"1"},1)),t<=3){for(let s=2;s<=Math.min(4,h-1);s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));h>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis"))}else if(t>=h-2){h>5&&e.push((0,r.jsx)("span",{className:"w-8 h-8 flex  items-center justify-center text-gray-400",children:"..."},"ellipsis"));for(let s=Math.max(h-3,2);s<=h-1;s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s))}else{e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis1"));for(let s=t-1;s<=t+1;s++)e.push((0,r.jsx)("button",{onClick:()=>f(s),className:"w-8 h-8 rounded text-sm cursor-pointer font-medium transition-colors ".concat(t===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:s},s));e.push((0,r.jsx)("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},"ellipsis2"))}h>1&&e.push((0,r.jsx)("button",{onClick:()=>f(h),className:"w-8 h-8 rounded text-sm font-medium transition-colors ".concat(t===h?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:h},h))}return e})()}),(0,r.jsx)("button",{onClick:()=>f(t+1),disabled:t===h,className:"w-8 h-8 rounded flex items-center justify-center transition-colors ".concat(t===h?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:(0,r.jsx)(a.A,{size:16})})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 relative",children:[(0,r.jsxs)("span",{className:"mr-2",children:[c," per page"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>m(!x),className:"flex items-center cursor-pointer justify-center w-6 h-6 rounded hover:bg-gray-100 transition-colors",children:(0,r.jsx)(i.A,{size:16})}),x&&(0,r.jsx)("div",{className:"absolute right-0 bottom-[35px] mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 min-w-[120px]",children:[5,10,20,50].map(e=>(0,r.jsxs)("button",{onClick:()=>p(e),className:"w-full cursor-pointer px-3 py-2 text-left text-sm hover:bg-gray-50 transition-colors ".concat(c===e?"bg-blue-50 text-blue-600":"text-gray-700"),children:[e," per page"]},e))})]})]}),x&&(0,r.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>m(!1)})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7141,9034,4249,636,6593,8792],()=>t(75889)),_N_E=e.O()}]);