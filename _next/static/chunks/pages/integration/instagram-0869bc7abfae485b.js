(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{237:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/integration/instagram",function(){return s(53915)}])},45982:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95551).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},53915:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(37876),n=s(14e3),r=s(75683),i=s(3176),l=s(43598),d=s(61302),c=s(74562),o=s(14232),u=s(65259);let x=e=>{let{id:t,handleActionState:s}=e,[n,r]=(0,o.useState)(!1),[i,d]=(0,o.useState)(null),x=async()=>{d(null),r(!0);let e=await u.A.doDelete({path:"/orgs/".concat(l.A.current().id,"/instagram/connections/").concat(t)});if(e.error){d(e.error.message),r(!1);return}r(!1),c.A.hide(),s()};return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{children:"Are you sure you want to delete this Instagram Account?"}),i&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:i}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,a.jsx)("button",{onClick:()=>c.A.hide(),className:"px-4 py-2 text-white rounded-md transition bg-gray-500 cursor-pointer",children:"Cancel"}),(0,a.jsx)("button",{disabled:n,onClick:x,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:n?"Deleting...":"Delete"})]})]})},m=function(){let e=(0,n.useRouter)(),t=l.A.currentId(),[s,m]=(0,o.useState)([]),h=()=>{let e="https://www.instagram.com/oauth/authorize?enable_fb_login=0&force_authentication=1&client_id=".concat(i.A.instagramAppId,"&redirect_uri=").concat(i.A.appUrl,"/integration/instagram/callback&response_type=code&scope=instagram_business_basic%2Cinstagram_business_manage_messages%2Cinstagram_business_manage_comments%2Cinstagram_business_content_publish%2Cinstagram_business_manage_insights");window.open(e)},p=(0,o.useCallback)(async()=>{let e=await u.A.doGet({path:"/orgs/".concat(t,"/instagram/connections")});if(e.error){console.log("Error:",e.error);return}e.data&&m(e.data.dbData.connections)},[t]),g=(e,t)=>{let s=new Date(new Date(Number(t)).getTime()+1e3*Number(e));return new Intl.DateTimeFormat("en-US",{weekday:"short",day:"2-digit",month:"short",year:"numeric"}).format(s)};return(0,o.useEffect)(()=>{p()},[p]),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-6 text-gray-700",children:[(0,a.jsx)("button",{className:"text-4xl hover:text-gray-800 mb-4 cursor-pointer",onClick:()=>e.push("/settings/?tab=channels-management"),children:(0,a.jsx)(r.eh5,{})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Instagram"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed",onClick:()=>h(),children:"Add Instagram"})]})]}),(0,a.jsx)("div",{className:"mt-4",children:s&&s.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 bg-gray-100 text-gray-700 font-medium py-3 px-5 sticky top-0",children:[(0,a.jsx)("div",{children:"Username"}),(0,a.jsx)("div",{children:"Account Type"}),(0,a.jsx)("div",{children:"Token Valid Till"}),(0,a.jsx)("div",{children:"Actions"})]}),s.map(e=>{var t,s,n,r,i;return(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center py-3 px-0 lg:py-4 lg:px-5 border-0 lg:border-b lg:border-gray-100 hover:bg-gray-50",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("div",{className:"max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap text-slate-800",title:null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.username,children:(0,a.jsx)("span",{className:"inline-block font-semibold",children:(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.username)||"N/A"})})}),(0,a.jsx)("div",{className:"block max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap text-slate-500",title:null==e?void 0:null===(n=e.user)||void 0===n?void 0:n.account_type,children:(0,a.jsx)("span",{className:"text-slate-500",children:null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.account_type})}),(0,a.jsx)("div",{className:"block max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap text-slate-500",title:g(e.expires_in,e.created_at),children:(0,a.jsx)("span",{className:"text-slate-500",children:g(e.expires_in,e.created_at)})}),(0,a.jsx)("div",{className:"block ",children:(0,a.jsx)(d.A,{className:"text-red-400",onClick:()=>c.A.show("Confirm Delete",(0,a.jsx)(x,{id:e.user.id,handleActionState:p}))})})]},null==e?void 0:null===(i=e.user)||void 0===i?void 0:i.username)})]})})]})}},61302:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(37876);s(14232);var n=s(45982);let r=e=>{let{size:t=20,className:s="",...r}=e;return(0,a.jsx)("button",{type:"button",className:"p-2 text-red-500 hover:text-red-600 cursor-pointer ".concat(s),...r,children:(0,a.jsx)(n.A,{className:"w-5 h-5"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5711,4e3,636,6593,8792],()=>t(237)),_N_E=e.O()}]);